<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>主页</title>

<link rel="stylesheet" type="text/css" href="../lib/css/bootstrap.min.css">
<script type="text/javascript" src="../lib/js/jquery.js"></script>
<script type="text/javascript" src="../lib/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../lib/js/jquery.params.js"></script>

</head>

<body onLoad = "autoChangeImage()">

<div class="container-fluid" style="background:#F4F4F4;height:37px">

<div class="row" >
<div class="col-sm-6" align="center">
<ul class="breadcrumb">
<span>你好!找到中意的书了吗？请</span>
	<li ><a href="#"><span class="glyphicon glyphicon-user"></span> 注册</a></li>
	<li><a href="#"><span class="glyphicon glyphicon-log-in"></span> 登录</a></li>
</ul>
</div>

<div class="col-sm-6" align="right">
<div class="dropdown">

<span> <a href="#">个人中心</a>&nbsp;&nbsp;&nbsp;| &nbsp;</span>
	<button type="button" class="btn dropdown-toggle" id="dropdownMenu1" 
			data-toggle="dropdown" style="background:#F4F4F4; color:#7057FB">
		客服
		<span class="caret"></span>
	</button>
	<ul class="dropdown-menu pull-right" role="menu" aria-labelledby="dropdownMenu1" >
		
		<li role="presentation" >
			<a role="menuitem" tabindex="-1" href="#">帮助中心</a>
		</li>
		<li role="presentation">
			<a role="menuitem" tabindex="-1" href="adminSys/booklist.html">管理员入口</a>
		</li>
	</ul>
</div>
</div>
</div>
</div>

<!-- 广告-->
<div class="container">
	<div style="height:100px">
		<img src="../data/img/advertisement.jpg" 
							alt="广告" height="120px" width="1141px"/>
	</div>
</div>

<div class="container">
<div class="row">
<div class="col-sm-2" >
<a href="firstPage.html">                   <!--返回主页-->   
            <img src="../data/img/bookshoplogo.jpg" alt="返回主页的效果" width="100px">
        </a>
</div>

<div class="col-sm-4 col-sm-offset-1" style="padding-top:50px;">
	<div class="container" style="width: 1000px;">
		<div class="row">
			<div class="form-group col-sm-3" style="margin-left:300px">
			<form>
				<input type="text" class="form-control" placeholder="搜寻书籍"  style="width:320px; height:40px;" id="searchBookname" value="文学艺术"/>      
			</form>
			</div>
			<div class="col-sm-1" style="padding-right: 0;">
				<button type="submit" class="btn btn-default" id="searchbtn" style="height:40px;float: right;border-right: 0;">
					<span class="glyphicon glyphicon-search"></span>
				</button>
			</div>
		</div>
	</div>	
</div>



<div class="col-sm-1" style="padding-top:60px;">
        <div style="border-color:#F4F4F4; border-style:groove; border-width:thin; height:25px; width:150px; margin-left:300px" align="center">
		<a href="#">
          <span class="glyphicon glyphicon-briefcase">&nbsp;购物车</span>
        </a>
</div>
</div>
</div>
</div>




<div class="container">
<div class="col-sm-3">

<ul class="nav nav-tabs">
	
	<li class="dropdown" style="width:260px">
		<a class="dropdown-toggle" data-toggle="dropdown" href="#">
			  <span class="glyphicon glyphicon-th-list">&nbsp; 全部商品分类 </span>
		</a>
		<ul class="dropdown-menu" style="width:258px;" >
			<li style="padding-bottom:20px" align = "center"><a href="searchPage.html?kind=文学艺术" id="">文学艺术</a></li>
			<li style="padding-bottom:20px" align = "center"><a href="searchPage.html?kind=人文社科" id="">人文社科</a></li>
			<li style="padding-bottom:20px" align = "center"><a href="searchPage.html?kind=少儿童书" id="">少儿童书</a></li>
			<li style="padding-bottom:20px" align = "center"><a href="searchPage.html?kind=教育考试" id="">教育考试</a></li>
			<li style="padding-bottom:20px" align = "center"><a href="searchPage.html?kind=经济金融" id="">经济金融</a></li>
			<li style="padding-bottom:20px" align = "center"><a href="searchPage.html?kind=生活休闲" id="">生活休闲</a></li>
			<li style="padding-bottom:20px" align = "center"><a href="searchPage.html?kind=科学技术" id="">科学技术</a></li>
			<li class="divider"></li>
			
		</ul>
	</li>
	
</ul>


</div>  <!--col 3-->

<div class="col-sm-9" style="background-color:#E9E9E9" id="imgIndex">                         <!--推荐书籍只有书籍的名字，全部展示才有价格-->
<div align="center">推荐书籍</div>
<div class="col-sm-3">
<div class="thumbnail">              <!--sql传进来动态，还是固定的静态呢               html 中可以先搞前四个，在js 的第一个radio情况下对齐 -->
           <a id="lj1" href="introduction.html?id=10002" class="thumbnail">
            <img id = 'tj1' 
			src="../data/img/1.jpg" alt="推荐书籍"  width="120px" height="100px">  
			</a>                                
            <div class="caption">              
                <p id='tjname1'>一开始</p>         <!--书本名字-->
              
				<p id='tjprice1'></p>          <!--书本价格-->
            </div>
</div>
</div>  <!--col 3-->

<div class="col-sm-3">
<div class="thumbnail">    
           <a id="lj2" href="introduction.html?id=10002" class="thumbnail">
            <img id = 'tj2'
			src="../data/img/1.jpg" alt="推荐书籍"  width="120px" height="100px">  
			</a>                                         
            <div class="caption">
                <p id='tjname2'>一开始</p>        <!--书本名字-->
              
				<p id='tjprice2'></p>          <!--书本价格-->
            </div>
</div>
</div>  <!--col 3-->

<div class="col-sm-3">
<div class="thumbnail">             
            <a id="lj3" href="introduction.html?id=10002" class="thumbnail">
            <img id = 'tj3'
			src="../data/img/1.jpg" alt="推荐书籍"  width="120px" height="100px">  
			</a>                                            
            <div class="caption">
               <p id='tjname3'>一开始</p>            <!--书本名字-->
              
				<p id='tjprice3'></p>           <!--书本价格-->
            </div> 
</div>
</div>  <!--col 3-->

<div class="col-sm-3">
<div class="thumbnail">             
            <a id="lj4" href="introduction.html?id=10002" class="thumbnail">
            <img id = 'tj4'
			src="../data/img/1.jpg" alt="推荐书籍"  width="120px" height="100px">  
			</a>                                          
            <div class="caption">
               <p id='tjname4'>一开始</p>            <!--书本名字-->
              
				<p id='tjprice4'></p>          <!--书本价格-->
            </div>
</div>
</div>  <!--col 3-->



        <div align="center">  
		                                                                                                            <!--轮播图的radio-->
                    <input id = "radio0"  name = "lit" type = "radio" value = "0" onClick="changeImage(0)" checked="checked" >
                    <input id = "radio1"  name = "lit" type = "radio" value = "1" onClick="changeImage(1)">
                    <input id = "radio2"  name = "lit" type = "radio" value = "2" onClick="changeImage(2)">
                 	  
       </div>   



</div>  <!--col 9-->

<div class="container" style="padding-top:400px">


<div id="bookshow">               <!--展示所有书籍-->

</div>


</div>

<div id="count" class="text-right">
                                            <!--pageNum    翻页按钮-->
</div>

</div>  <!--container-->





</body>



<script>
    var i = 1;    //轮播图从第一页开始进行
    var pageSize = 20;//记录每页显示多少本书籍
	var page = 1;//当前是第几页

function load(){
        var stext = "";
        var xhr = new XMLHttpRequest;
        xhr.open('GET',`/showlist?page=${page}&pageSize=${pageSize}&stext=${stext}`);
		xhr.send();
        xhr.onload = function(){
		var data = JSON.parse(xhr.responseText);//获得数据
		if(data.code==1){
				var result = data.data;//要渲染在表格中的数据!!!!!
				var total = data.total;//总数据条数
			    var totalPage =  Math.ceil(total/pageSize);	//根据total展示总页数
				var string = `<nav aria-label="Page navigation">
								  <ul class="pagination">
    								<li>
     									<a href="#" aria-label="Previous">
       									 <span aria-hidden="true">&laquo;</span>
      								</a>
    								</li> `;
				for(var j=0;j<Math.min(10,totalPage);j++){
					//如果循环的页码和当前页面相同，则当前页码高亮
					if(j==page-1){
						string = string+`<li class="active"><a href="javascript:;" class="page">${j+1}</a></li>`;
					}else{
						string = string+`<li><a href="javascript:;" class="page">${j+1}</a></li>`;
					}	
				}
				string=string+
                ` <li>
     							<a href="#" aria-label="Next">
        							<span aria-hidden="true">&raquo;</span>
      						</a>
    							</li>
  							</ul>
				</nav>`
				document.getElementById('count').innerHTML = string;

				//分页
				var pageArr = document.getElementsByClassName('page');
				for(var i=0;i<pageArr.length;i++){
					pageArr[i].onclick = function(){
						//在事件函数中，this指的绑定事件的那个元素
						page = this.innerHTML;
						load()
					}
        }
				
				
				
				//根据result渲染表格数据
				var str = "";
				for(var i=0;i<result.length;i++){
				str = str+`
				<div class="col-sm-3">
                <div class="thumbnail">    
                   <a href="introduction.html?id=${result[i].id}" class="thumbnail" target="_blank">                                       
            <img 
			src= "${result[i].filedir}" alt="这是一本书"  width="120px" height="100px">  
			</a>                                         
            <div class="caption">
                <p><b>${result[i].title}</b></p>        <!--书本名字-->
                
				<p style = "color:red">￥ ${result[i].price}</p>          <!--书本价格-->
            </div>
      </div>
   </div>  <!--col 3-->
				`;
				};      // for
				var bookshow = document.getElementById('bookshow')
				
				bookshow.innerHTML = str;
				
		   }//if
		else alert("DATA NULL");
		} //onloadfuction
} //load


load()


                         //轮播图静态自动转播

function autoChangeImage(i){                //自动改变图片
        setTimeout("changeImage(i++); ", 1500);
        //setTimeout("back(i); ", 1000);
        setTimeout("autoChangeImage(i = (i%3)); ", 1500);
}
function changeImage(idNum){
        document.getElementById("radio" + idNum).checked = "checked";
        switch(idNum){
            case 0:
                document.getElementById("tj1").src = "../data/img/1.jpg";  //改变首页图片, 轮播图三个点
				document.getElementById("tjname1").innerHTML = "你好";                               //倒入书名
				//document.getElementById("tjprice1").innerHTML = 1;                                  //导入价格
				document.getElementById("lj1").href = "introduction.html?id=10002";                                //本地的html可以直接跳转
				
				document.getElementById("tj2").src = "../data/img/1.jpg";
				document.getElementById("tjname2").innerHTML = "你好";                               //倒入书名
				//document.getElementById("tjprice2").innerHTML = 1;   
				document.getElementById("lj2").href = "introduction.html?id=10002";                    //非本地要https:\\
				
				document.getElementById("tj3").src = "../data/img/1.jpg";
				document.getElementById("tjname3").innerHTML = "你好";                               //倒入书名
				//document.getElementById("tjprice3").innerHTML = 1;   
				document.getElementById("lj3").href = "introduction.html?id=10002";
				
				document.getElementById("tj4").src = "../data/img/1.jpg";
				document.getElementById("tjname4").innerHTML = "你好";                               //倒入书名
				//document.getElementById("tjprice4").innerHTML = 1;   
				document.getElementById("lj4").href = "introduction.html?id=10002";
                break;
            case 1:
                document.getElementById("tj1").src = "../data/img/1.jpg";  //改变首页图片, 轮播图三个点
				document.getElementById("tjname1").innerHTML = "你好";                               //倒入书名
				//document.getElementById("tjprice1").innerHTML = 2;                                  //导入价格
				document.getElementById("lj1").href = "introduction.html?id=10002";
				
				document.getElementById("tj2").src = "../data/img/1.jpg";
				document.getElementById("tjname2").innerHTML = "你好";                               //倒入书名
				//document.getElementById("tjprice2").innerHTML = 2;   
				document.getElementById("lj2").href = "introduction.html?id=10002";
				
				document.getElementById("tj3").src = "../data/img/1.jpg";
				document.getElementById("tjname3").innerHTML = "你好";                               //倒入书名
				//document.getElementById("tjprice3").innerHTML = 2;   
				document.getElementById("lj3").href = "introduction.html?id=10002";
				
				document.getElementById("tj4").src = "../data/img/1.jpg";
				document.getElementById("tjname4").innerHTML = "你好";                               //倒入书名
				//document.getElementById("tjprice4").innerHTML = 2; 
				document.getElementById("lj4").href = "introduction.html?id=10002";
                break;
            case 2:
               document.getElementById("tj1").src = "../data/img/1.jpg";  //改变首页图片, 轮播图三个点
				document.getElementById("tjname1").innerHTML = "你好";                               //倒入书名
				//document.getElementById("tjprice1").innerHTML = 3;                                  //导入价格
				document.getElementById("lj1").href = "introduction.html?id=10002";
				
				document.getElementById("tj2").src ="../data/img/1.jpg";
				document.getElementById("tjname2").innerHTML = "你好";                               //倒入书名
				//document.getElementById("tjprice2").innerHTML = 3;  
				document.getElementById("lj2").href = "introduction.html?id=10002"; 
				
				document.getElementById("tj3").src = "../data/img/1.jpg";
				document.getElementById("tjname3").innerHTML = "你好";                               //倒入书名
				//document.getElementById("tjprice3").innerHTML = 3; 
				document.getElementById("lj3").href = "introduction.html?id=10002";  
				
				document.getElementById("tj4").src = "../data/img/1.jpg";
				document.getElementById("tjname4").innerHTML = "你好";                               //倒入书名
				//document.getElementById("tjprice4").innerHTML = 3; 
				document.getElementById("lj4").href = "introduction.html?id=10002";
				
                break;
        }
}



                        //将  种类数据 或者  搜索数据  传入到   searchPage
$(function(){
                                           
$("#searchbtn").on("click",function(){
jump1();
});
});


function jump1(){

var value = document.getElementById("searchBookname").value;  
if(value != "")
{
var searchBookname = value;
url = "searchPage.html?searchBookname="+searchBookname;//此处拼接内容
window.location.href = url;
}

}


    </script>



</html>